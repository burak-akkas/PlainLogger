# PlainLogger
[![Version](https://img.shields.io/cocoapods/v/PlainLogger.svg?style=flat)](https://cocoapods.org/pods/PlainLogger)
[![Platform](https://img.shields.io/cocoapods/p/PlainLogger.svg?style=flat)](https://cocoapods.org/pods/PlainLogger)

## Example

To run the example project, clone the repo, and run `pod install` from the Example directory first.

## Requirements
iOS 11.0 and up.

## Installation

PlainLogger is available through [CocoaPods](https://cocoapods.org). To install
it, simply add the following line to your Podfile:

```ruby
pod 'PlainLogger'
```

## How to use

First, import PlainLogger

```swift
import PlainLogger
```

### Configuration

Configure PlainLogger preferably on your AppDelegate. 

```swift
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    let configuration = PlainLogger.Configuration(
                                        // Enable or disable logger
                                        enabled: true,
                                      
                                        // Logging level (.verbose, .info, .error, .debug)
                                        level: .verbose,

                                        // Logging date format
                                        dateFormat: "dd/MM/yyyy HH:mm",

                                        // Enable indicators (emojis) for easy to read logging on console
                                        indicatorsEnabled: true,

                                        // Specify indicators for each logging level
                                        indicatorScheme: PlainLogger.IndicatorScheme(),

                                        // Specify console logging template
                                        consoleLoggingTemplate: nil,

                                        // Specify data store providers for logging
                                        providers: [DefaultDiskDataStoreProvider()])
                                          
    PlainLogger.configure(with: configuration)
    
    return true
}
```

### Usage

```swift
PlainLogger.debug(tag: "Tag debug", message: "Log debug")
PlainLogger.error(message: "Log error")
PlainLogger.info(message: "Log info")
PlainLogger.verbose(message: "Log verbose")
```

### Advanced Configuration

PlainLogger has more to configure.

#### Console Logging Template

You can organise console logs which are generated by PlainLogger like following:

```swift
// Default console logging template and its preview
let template =  "#line_break# #logger_signature# #log_level# #date#" +      // [📋 Log] [🔎 Error] [⏰ 01/02/2019 10:51]
                "#line_break# #indicator# Tag: #tag#" +                     //  🔴 Tag: Test tag
                "#line_break# #indicator# Message: #message#" +             //  🔴 Message: Test error
                "#line_break# #indicator# Function: #function#" +           //  🔴 Function: viewDidLoad()
                "#line_break# #indicator# File: #file#" +                   //  🔴 File: ViewController.swift
                "#line_break# #indicator# Line: #line#, Column: #column#"   //  🔴 Line: 19, Column: 18
                
// Configure logger with given template
let configuration = PlainLogger.Configuration(consoleLoggingTemplate: template)
PlainLogger.configure(with: configuration)
```

#### Data Store Providers

PlainLogger triggers store() method on given provider(s) for every logging operation. Which are configurable by 

```swift
let configuration = PlainLogger.Configuration(providers: [DefaultDiskDataStoreProvider()])
PlainLogger.configure(with: configuration)
```

Provides 2 different data stores by example which are DefaultHttpDataStoreProvider (POSTs log to given API path) and DefaultDiskDataStoreProvider (Stores log by user defaults) but you can implement your own data store providers by implementing LogDataStoreProvider protocol.

```swift
// LogDataStoreProvider protocol
public protocol LogDataStoreProvider {
    func store(log: LogDataStoreModel)
    
    // Data store providers identificaton
    func identification() -> String
}

// Example implementation for LogDataStoreProvider
public class DefaultDiskDataStoreProvider: LogDataStoreProvider {
    let userDefaults = UserDefaults.standard
    let diskDataStoreKey = "LoggerDiskDataStoreKey"
    
    public init() {}
    
    public func store(log: LogDataStoreModel) {
        if let logData = userDefaults.object(forKey: diskDataStoreKey) as? Data {
            if var logs = try? NSKeyedUnarchiver.unarchivedObject(ofClasses: [LogDataStoreModel.self], from: logData) as? [LogDataStoreModel] {
                logs?.append(log)
                if let newData = try? NSKeyedArchiver.archivedData(withRootObject: logs as Any, requiringSecureCoding: false) {
                    userDefaults.set(newData, forKey: diskDataStoreKey)
                }
            }
        } else {
            if let newData = try? NSKeyedArchiver.archivedData(withRootObject: [log] as Any, requiringSecureCoding: false) {
                userDefaults.set(newData, forKey: diskDataStoreKey)
            }
        }
    }
    
    public func identification() -> String {
        return "DefaultDiskDataStoreProvider"
    }
}
```

#### Indicator Schemes

You can configure indicator schemes through IndicatorScheme object.

```swift
let scheme = PlainLogger.IndicatorScheme(   debug: .normal,   // 🙂
                                            info: .blue,      // 🔵
                                            verbose: .white,  // 💀
                                            error: .red)      // 🔴
                                         
let configuration = PlainLogger.Configuration(indicatorScheme: scheme)
PlainLogger.configure(with: configuration)
```

## Author

Burak Akkaş

## License

PlainLogger is available under the MIT license. See the LICENSE file for more info.
